"use strict";(()=>{var e={};e.id=652,e.ids=[652],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6202:(e,t,n)=>{n.r(t),n.d(t,{headerHooks:()=>h,originalPathname:()=>x,requestAsyncStorage:()=>u,routeModule:()=>m,serverHooks:()=>y,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>v});var r={};n.r(r),n.d(r,{POST:()=>d}),n(4067);var o=n(7136),a=n(2494),i=n(1723);let s={gemini:{models:{pro:"gemini-pro",vision:"gemini-pro-vision"},maxRetries:3,timeout:3e4}};class p{constructor(){this.apiKey=process.env.GOOGLE_API_KEY||""}static getInstance(){return p.instance||(p.instance=new p),p.instance}async generateContent(e,t={model:s.gemini.models.pro}){try{let n=await fetch(`https://generativelanguage.googleapis.com/v1/models/${t.model}:generateContent`,{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-key":this.apiKey},body:JSON.stringify({contents:[{parts:[{text:e}]}]})});if(!n.ok)throw Error(`Gemini API error: ${n.statusText}`);let r=await n.json();return r.candidates[0].content.parts[0].text}catch(e){throw console.error("Gemini generation error:",e),e}}async generateFromImage(e,t){try{let n=await fetch(`https://generativelanguage.googleapis.com/v1/models/${s.gemini.models.vision}:generateContent`,{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-key":this.apiKey},body:JSON.stringify({contents:[{parts:[{text:t},{inline_data:{mime_type:"image/jpeg",data:e}}]}]})});if(!n.ok)throw Error(`Gemini Vision API error: ${n.statusText}`);let r=await n.json();return r.candidates[0].content.parts[0].text}catch(e){throw console.error("Gemini vision error:",e),e}}}let l=p.getInstance();async function d(e){try{let{videoUrl:t}=await e.json();if(!t)return i.Z.json({error:"Video URL is required"},{status:400});let n={transcript:"Sample transcript",summary:await l.generateContent("Generate a summary for this video content"),keywords:["ai","video","analysis"],sponsorInfo:{hasSponsoredContent:!1,sponsoredSegments:[]}};return i.Z.json(n)}catch(e){return console.error("Analysis error:",e),i.Z.json({error:"Failed to analyze video"},{status:500})}}let c=o.AppRouteRouteModule,m=new c({definition:{kind:a.x.APP_ROUTE,page:"/api/analyze/route",pathname:"/api/analyze",filename:"route",bundlePath:"app/api/analyze/route"},resolvedPagePath:"/home/bhavin786/VideoInsightPro/app/api/analyze/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:u,staticGenerationAsyncStorage:g,serverHooks:y,headerHooks:h,staticGenerationBailout:v}=m,x="/api/analyze/route"}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[743],()=>n(6202));module.exports=r})();